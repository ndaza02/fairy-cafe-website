<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Menu - Fairy Cafe Bulawayo</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-yellow': '#1d691b',
                        'text-dark': '#2B2B2B',
                        'text-gray': '#7c7c7c',
                        'bg-light': '#F2F2F2',
                        'bg-dark': '#111',
                    },
                    fontFamily: {
                        'poppins': ['Poppins', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            scroll-behavior: smooth;
        }

        .menu-category-card {
            transition: all 0.3s ease;
        }

        .menu-category-card:hover {
            transform: translateY(-5px);
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #1d691b;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #154d14;
        }

        .nav-link-active {
            color: #2B2B2B;
            padding-left: 0.8rem;
            border-left: 3px solid #1d691b;
            font-weight: 700;
            background: rgba(29, 105, 27, 0.05);
        }

        .menu-item {
            opacity: 1;
            /* Ensure visible by default, GSAP will handle entrance if working */
        }
    </style>
</head>

<body class="bg-bg-light min-h-screen text-text-dark overflow-x-hidden">

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 w-full z-50 flex justify-between items-center px-6 py-2 md:px-16 box-border">
        <!-- Logo -->
        <a href="index.html" class="flex items-center md:ml-8">
            <img src="logo.png" alt="Fairy Cafe Logo"
                class="h-44 w-auto object-contain drop-shadow-md hover:scale-105 transition-transform duration-300">
        </a>

        <!-- Center Nav -->
        <div class="hidden md:flex items-center gap-10">
            <i data-lucide="search" class="w-4 h-4 cursor-pointer hover:text-primary-yellow transition-colors"></i>
            <ul class="flex gap-8 list-none">
                <li><a href="index.html#features-section"
                        class="text-text-gray text-sm font-medium hover:text-text-dark transition-colors">Why
                        Fairy Cafe?</a></li>
                <li><a href="index.html#about-section"
                        class="text-text-dark text-sm font-medium relative transition-colors">
                        About
                        <span
                            class="absolute -top-1 -left-2.5 w-1.5 h-1.5 bg-text-dark rounded-full rotate-45 transform"></span>
                    </a></li>
                <li class="relative group">
                    <a href="menu.html"
                        class="text-text-gray text-sm font-bold text-primary-yellow transition-colors flex items-center gap-1">
                        Menu
                        <i data-lucide="chevron-down"
                            class="w-3.5 h-3.5 transition-transform group-hover:rotate-180"></i>
                    </a>
                    <!-- Dropdown Menu -->
                    <div
                        class="absolute top-full left-1/2 -translate-x-1/2 pt-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
                        <div class="bg-white rounded-2xl shadow-2xl p-4 border border-gray-50 min-w-[180px]">
                            <ul class="space-y-2">
                                <li><a href="menu.html?cat=breakfast"
                                        class="text-text-gray text-xs hover:text-primary-yellow flex items-center gap-2 transition-colors py-1"><i
                                            data-lucide="coffee" class="w-3 h-3"></i> Breakfast</a></li>
                                <li><a href="menu.html?cat=burgers"
                                        class="text-text-gray text-xs hover:text-primary-yellow flex items-center gap-2 transition-colors py-1"><i
                                            data-lucide="beef" class="w-3 h-3"></i> Burgers</a></li>
                                <li><a href="menu.html?cat=pizzas"
                                        class="text-text-gray text-xs hover:text-primary-yellow flex items-center gap-2 transition-colors py-1"><i
                                            data-lucide="pizza" class="w-3 h-3"></i> Pizzas</a></li>
                                <li><a href="menu.html?cat=sushi"
                                        class="text-text-gray text-xs hover:text-primary-yellow flex items-center gap-2 transition-colors py-1"><i
                                            data-lucide="fish" class="w-3 h-3"></i> Sushi</a></li>
                            </ul>
                        </div>
                    </div>
                </li>
            </ul>
        </div>

        <!-- Mobile Menu Toggle -->
        <div class="md:hidden flex items-center gap-4">
            <button id="mobile-menu-btn" class="p-2 text-text-dark hover:text-primary-yellow transition-colors"
                aria-label="Toggle Menu">
                <i data-lucide="menu" class="w-8 h-8"></i>
            </button>
        </div>

        <!-- Auth Buttons (Desktop) -->
        <div class="hidden md:flex items-center gap-6">
            <button
                class="px-6 py-2.5 rounded-full text-sm font-medium border border-text-dark bg-white text-text-dark hover:bg-bg-light transition-all">Sign
                In</button>
            <button
                class="px-6 py-2.5 rounded-full text-sm font-medium bg-primary-yellow text-white shadow-[0_5px_15px_rgba(29,105,27,0.4)] hover:-translate-y-0.5 hover:shadow-[0_8px_18px_rgba(29,105,27,0.6)] transition-all">Login</button>
            <button id="open-cart"
                class="relative p-2 bg-primary-yellow/10 rounded-full hover:bg-primary-yellow/20 transition-all">
                <i data-lucide="shopping-cart" class="w-5 h-5 text-primary-yellow"></i>
                <span id="cart-count"
                    class="absolute -top-1 -right-1 bg-primary-yellow text-white text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center border-2 border-white">0</span>
            </button>
        </div>
    </nav>

    <!-- Mobile Sidebar -->
    <div id="mobile-sidebar"
        class="fixed inset-0 bg-black/60 backdrop-blur-md z-[100] transition-opacity duration-300 opacity-0 invisible">
        <div
            class="absolute right-0 top-0 h-full w-[300px] bg-white p-10 flex flex-col transform translate-x-full transition-transform duration-300 ease-in-out shadow-2xl">
            <button id="close-sidebar" class="self-end p-2 text-text-gray hover:text-text-dark mb-10"
                aria-label="Close Sidebar">
                <i data-lucide="x" class="w-8 h-8"></i>
            </button>

            <ul class="flex flex-col gap-6 mb-12">
                <li><a href="index.html#features-section"
                        class="text-xl font-bold text-text-dark border-b border-gray-100 pb-2 block">Why Fairy
                        Cafe?</a></li>
                <li><a href="index.html#about-section"
                        class="text-xl font-bold text-text-dark border-b border-gray-100 pb-2 block">About</a></li>
                <li><a href="menu.html"
                        class="text-xl font-bold text-primary-yellow border-b border-gray-100 pb-2 block">Full Menu</a>
                </li>
                <li><a href="#" id="mobile-cart-link"
                        class="text-xl font-bold text-text-dark border-b border-gray-100 pb-2 flex justify-between items-center">
                        My Cart
                        <span id="mobile-cart-count"
                            class="bg-primary-yellow text-white text-xs px-3 py-1 rounded-full">0</span>
                    </a></li>
            </ul>

            <div class="mt-auto flex flex-col gap-4">
                <button
                    class="w-full py-4 rounded-full font-bold border-2 border-text-dark text-text-dark hover:bg-bg-light transition-all">Sign
                    In</button>
                <button
                    class="w-full py-4 rounded-full font-bold bg-primary-yellow text-white shadow-lg hover:bg-text-dark transition-all">Login</button>
            </div>
        </div>
    </div>

    <!-- Side Cart Drawer -->
    <div id="cart-drawer"
        class="fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm opacity-0 invisible transition-all duration-300">
        <div
            class="absolute right-0 top-0 h-full w-full md:w-[450px] bg-white shadow-2xl flex flex-col transform translate-x-full transition-transform duration-400 ease-in-out">
            <div class="p-8 border-b border-gray-100 flex justify-between items-center">
                <h3 class="text-2xl font-bold flex items-center gap-3">
                    <i data-lucide="shopping-bag" class="text-primary-yellow"></i>
                    Your Cart
                </h3>
                <button id="close-cart" class="p-2 hover:bg-gray-100 rounded-full transition-all"
                    aria-label="Close Cart">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <div id="cart-items" class="flex-grow overflow-y-auto p-8 space-y-6">
                <!-- Cart items injected via JS -->
                <div class="text-center py-20 opacity-40">
                    <i data-lucide="shopping-cart" class="w-16 h-16 mx-auto mb-4"></i>
                    <p class="italic">Your cart is empty</p>
                </div>
            </div>

            <div class="p-8 bg-gray-50 border-t border-gray-100">
                <div class="flex justify-between items-center mb-6">
                    <span class="text-text-gray font-medium">Subtotal</span>
                    <span id="cart-subtotal" class="text-3xl font-bold text-text-dark">$0.00</span>
                </div>
                <a href="checkout.html" id="checkout-btn"
                    class="block w-full py-5 bg-text-dark text-white rounded-full font-bold text-lg text-center hover:bg-primary-yellow transition-all transform hover:-translate-y-1 shadow-xl">
                    Proceed to Checkout
                </a>
                <p class="text-center text-xs text-text-gray mt-4 flex items-center justify-center gap-1">
                    <i data-lucide="info" class="w-3 h-3"></i>
                    Bulk orders? Call +263 XX XXX XXXX
                </p>
            </div>
        </div>
    </div>

    <!-- Hero Header -->
    <header class="pt-32 pb-16 px-6 md:px-16 bg-white">
        <div class="max-w-[1200px] mx-auto text-center">
            <h1 class="text-5xl md:text-6xl font-bold mb-6 italic">Full Menu</h1>
            <p class="text-text-gray text-lg max-w-2xl mx-auto mb-10 text-balance">Explore our complete collection from
                Fairy Cafe. Select your nearest branch below.</p>

            <!-- Branch Selection -->
            <div class="flex justify-center flex-wrap gap-4 mb-10">
                <button onclick="switchLocation('bulawayo')" id="tab-bulawayo"
                    class="branch-tab active px-6 py-2 rounded-full border border-primary-yellow bg-primary-yellow text-white font-bold transition-all hover:shadow-lg hover:-translate-y-1">
                    Bulawayo
                </button>
                <button onclick="switchLocation('greendale')" id="tab-greendale"
                    class="branch-tab px-6 py-2 rounded-full border border-gray-200 bg-white text-text-dark font-medium transition-all hover:border-primary-yellow hover:text-primary-yellow hover:-translate-y-1">
                    Greendale
                </button>
                <button onclick="switchLocation('joina_city')" id="tab-joina_city"
                    class="branch-tab px-6 py-2 rounded-full border border-gray-200 bg-white text-text-dark font-medium transition-all hover:border-primary-yellow hover:text-primary-yellow hover:-translate-y-1">
                    Joina City
                </button>
            </div>

            <!-- Search Bar -->
            <div class="relative max-w-xl mx-auto">
                <i data-lucide="search" class="absolute left-5 top-1/2 -translate-y-1/2 text-text-gray w-5 h-5"></i>
                <input type="text" id="menu-search" placeholder="Search delicious food..."
                    class="w-full py-4 pl-14 pr-6 rounded-full border border-gray-200 outline-none focus:border-primary-yellow focus:ring-4 focus:ring-primary-yellow/10 transition-all text-lg shadow-sm">
            </div>
        </div>
    </header>

    <!-- Menu Content -->
    <main class="py-16 px-6 md:px-16">
        <div class="max-w-[1200px] mx-auto grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-12">

            <!-- Sidebar Navigation -->
            <aside class="hidden lg:block sticky top-24 h-[calc(100vh-120px)] overflow-y-auto pr-4 custom-scrollbar">
                <h3 class="text-xs font-bold uppercase tracking-widest text-text-gray mb-6">Menu Categories</h3>
                <nav id="category-nav" class="flex flex-col gap-1">
                    <!-- Links will be injected here -->
                </nav>
            </aside>

            <!-- Menu Sections -->
            <div id="menu-sections" class="space-y-16">
                <!-- Categories and items will be injected here -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-bg-dark text-white pt-20 pb-10 px-6 md:px-16 text-left">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-12 max-w-[1200px] mx-auto mb-16 text-left">
            <div class="col-span-1">
                <div class="text-3xl font-bold mb-6 italic">Fairy Cafe<span class="text-primary-yellow">.</span></div>
                <p class="text-[14px] text-[#aaa] leading-7 mb-6">Delicious food delivered to your door. Experience the
                    best flavors in town with Fairy Cafe.</p>
                <div class="flex gap-4">
                    <a href="#"
                        class="w-10 h-10 bg-white/5 rounded-full flex justify-center items-center text-white hover:bg-primary-yellow hover:text-text-dark hover:-translate-y-1 transition-all"
                        aria-label="Facebook"><i data-lucide="facebook" class="w-5 h-5"></i></a>
                    <a href="#"
                        class="w-10 h-10 bg-white/5 rounded-full flex justify-center items-center text-white hover:bg-primary-yellow hover:text-text-dark hover:-translate-y-1 transition-all"
                        aria-label="Twitter"><i data-lucide="twitter" class="w-5 h-5"></i></a>
                    <a href="#"
                        class="w-10 h-10 bg-white/5 rounded-full flex justify-center items-center text-white hover:bg-primary-yellow hover:text-text-dark hover:-translate-y-1 transition-all"
                        aria-label="Instagram"><i data-lucide="instagram" class="w-5 h-5"></i></a>
                </div>
            </div>

            <div>
                <h4 class="text-lg font-bold mb-6">Quick Links</h4>
                <ul class="space-y-4 text-sm text-[#aaa]">
                    <li><a href="index.html" class="hover:text-primary-yellow hover:pl-1 transition-all">Home</a></li>
                    <li><a href="menu.html" class="hover:text-primary-yellow hover:pl-1 transition-all">Our Menu</a>
                    </li>
                    <li><a href="index.html#about-section"
                            class="hover:text-primary-yellow hover:pl-1 transition-all">About Us</a></li>
                    <li><a href="#" class="hover:text-primary-yellow hover:pl-1 transition-all">Contact</a></li>
                </ul>
            </div>

            <div>
                <h4 class="text-lg font-bold mb-6">Services</h4>
                <ul class="space-y-4 text-sm text-[#aaa]">
                    <li><a href="#" class="hover:text-primary-yellow hover:pl-1 transition-all">Online Ordering</a></li>
                    <li><a href="#" class="hover:text-primary-yellow hover:pl-1 transition-all">Table Booking</a></li>
                    <li><a href="#" class="hover:text-primary-yellow hover:pl-1 transition-all">Catering</a></li>
                    <li><a href="#" class="hover:text-primary-yellow hover:pl-1 transition-all">Gift Cards</a></li>
                </ul>
            </div>

            <div>
                <h4 class="text-lg font-bold mb-6">Contact Us</h4>
                <ul class="space-y-4 text-sm text-[#aaa]">
                    <li class="flex items-center gap-3"><i data-lucide="phone" class="w-4 h-4"></i> +263 78 411 5251
                    </li>
                    <li class="flex items-center gap-3"><i data-lucide="mail" class="w-4 h-4"></i> info@fairycafe.co.zw
                    </li>
                    <li class="flex items-center gap-3"><i data-lucide="map-pin" class="w-4 h-4"></i> 127 Fife street
                        between 13th and 14th Ave, Bulawayo</li>
                </ul>
            </div>
        </div>

        <div class="text-center pt-10 border-t border-white/5 text-[#777] text-sm italic">
            <p>&copy; 2026 Fairy Cafe. All rights reserved. Bulawayo’s Premium Taste.</p>
        </div>
    </footer>

    <script>
        // COMPREHENSIVE Menu Data from menu.md
        const baseMenuData = [
            {
                category: "Bulawayo Breakfast",
                items: [
                    { name: "Fairy Breakfast", price: "$7.00", desc: "Filled with fluffy scrambled eggs, melted cheese & tomato & soup on the side", image: "images/menu/Fairy Breakfast $5 (1 egg, 2 rations of bacon, tomato slice, 12 a sausage & chips).jpeg" },
                    { name: "Carnivore Breakfast", price: "$5.00", desc: "2 eggs, 2 rashers of bacon, 1 sausage" },
                    { name: "Club Sandwich", price: "$7.00", desc: "Baked Ham/Cheese | Chicken Mayo | Bacon | Egg & Cheese | Coleslaw Sandwich" },
                    { name: "Early Bird Breakfast", price: "$8.00", desc: "Toast 2 slices, 2 eggs, 50g cherry tomatoes, 2 rashers of bacon" },
                    { name: "Fairy Breakfast", price: "$5.00", desc: "1 egg, 2 rashers of bacon, tomato slice, 1/2 a sausage & small chips", image: "images/menu/Fairy Breakfast $5 (1 egg, 2 rations of bacon, tomato slice, 12 a sausage & chips).jpeg" },
                    { name: "Hungry Man’s Breakfast", price: "$12.00", desc: "2 eggs, country style sausage, tomato slice, 3 rashers of bacon, mushroom, 300g Rump/fillet & potato wedges", image: "images/menu/Hungry Man's Breakfast $12.jpeg" },
                    { name: "Muesli (V)", price: "$6.00", desc: "Yoghurt & Mixed Fruits", image: "images/menu/Muesli $6.jpeg" },
                    { name: "Omelette", price: "$5.00", desc: "Bacon omelette, veggie omelette, mushroom omelette, or Lamb & feta omelette" },
                    { name: "Sandwiches", price: "$5.00", desc: "Baked Ham/Cheese | Chicken Mayo | Bacon | Egg & Cheese | Coleslaw Sandwich (options)" },
                    { name: "Vegetarian Breakfast Bowl (V)", price: "$8.00", desc: "Poached egg, creamed spinach, roasted butternut, mushroom & toast" },
                    { name: "Waffle Delight", price: "$6.00", desc: "1 waffle, baby spinach, bacon, egg, syrup", image: "images/menu/Waffle Delight $6 (1 Waffle, Baby Spinach, bacon egg syrup).jpeg" },
                    { name: "Kota", price: "$4.50", desc: "Traditional township flavor", image: "images/menu/Kota $4,50.jpeg" }
                ]
            },
            {
                category: "Coffee and Teas",
                items: [
                    { name: "Americano", price: "$2.00", desc: "Classic black coffee" },
                    { name: "Cappuccino (Reg/Large)", price: "$2.50 / $3.00", desc: "Rich and creamy" },
                    { name: "Teas", price: "$1.50", desc: "Assorted select teas" },
                    { name: "Mochaccino", price: "$2.50", desc: "Coffee chocolate fusion" },
                    { name: "Latte’s", price: "$3.00", desc: "Smooth milky coffee" },
                    { name: "Boba Tea", price: "$3.00", desc: "Refreshing bubble tea" },
                    { name: "Coffee Freezo", price: "$2.50", desc: "Ice blended coffee" }
                ]
            },
            {
                category: "Confectionery",
                items: [
                    { name: "Alikrukeli", price: "$0.75", desc: "Sweet treat" },
                    { name: "Croissants", price: "$1.50", desc: "Buttery pastry" },
                    { name: "Maringue Tart", price: "$1.50", desc: "Light and sweet" },
                    { name: "Brownies", price: "$2.00", desc: "Classic chocolate brownies" },
                    { name: "Filled Brownies", price: "$2.50", desc: "Decadent filled brownies" },
                    { name: "Cupcakes / Muffins", price: "$1.00", desc: "Fresh baked daily" },
                    { name: "Custard Croffins", price: "$1.00", desc: "Croissant muffin hybrid with custard" },
                    { name: "Rosquillas", price: "$0.75", desc: "Specialty doughnut" },
                    { name: "Sweet Buns / Rolls", price: "$1.00", desc: "Soft sweet breads" },
                    { name: "Madeira", price: "$2.00", desc: "Classic sponge cake" },
                    { name: "Cake Slices", price: "$3.00", desc: "Assorted premium cakes" },
                    { name: "Cheese Cake", price: "$4.00", desc: "Rich creamy cheesecake" },
                    { name: "Chocolate Mousse", price: "$3.50", desc: "Silky chocolate dessert" },
                    { name: "Choc Mousse Tub", price: "$3.00", desc: "To-go treat" },
                    { name: "Trifle", price: "$2.50", desc: "Layered sponge and custard" },
                    { name: "Lemon Curd", price: "$1.25", desc: "Zesty lemon dessert" },
                    { name: "Waffles", price: "$3.00", desc: "For 2", image: "images/menu/Waffles $3 for 2.jpeg" }
                ]
            },
            {
                category: "Bulawayo Burgers",
                items: [
                    { name: "Bacon & Brie", price: "$9.00", desc: "Crispy bacon with creamy brie cheese creating a symphony of flavours" },
                    { name: "BBQ Cheese", price: "$6.00", desc: "Grilled patty smothered in tangy BBQ sauce & melted cheese" },
                    { name: "Big Fairy Burger", price: "$12.00", desc: "2 beef patties, 2 cheese slices, 4 rashers of bacon, avocado, tomato, lettuce", image: "images/menu/Big Fairy Burger $12 (2 beef patties, 2 cheese slices, 4 rashers of bacon, avocado, tomato and lettuce, burger roll with chips and salad).jpeg" },
                    { name: "Chicken Crunchy", price: "$7.00", desc: "Crumbed chicken breast, lettuce, tomato & chips" },
                    { name: "Pork Rib Burger", price: "$7.00", desc: "1 rib patty, lettuce, tomato, burger roll & chips" },
                    { name: "Supreme Cheese Burger", price: "$10.00", desc: "2 beef patties, 2 cheese slices, tomato, lettuce & chips", image: "images/menu/Supreme Burger $9.jpeg" }
                ]
            },
            {
                category: "Bulawayo Tapas",
                items: [
                    { name: "6 Small Prawns with Rice", price: "$10.00", desc: "Light seafood dish" },
                    { name: "4 Wings / 4 Drums", price: "$7.00", desc: "Chicken nibbles" },
                    { name: "Soup of the Day", price: "$5.00", desc: "Creamy Tomato Soup", image: "images/menu/Soup of the Day (Creamy Tomato Soup) $5.jpeg" },
                    { name: "Crumbed Mushroom", price: "$4.00", desc: "Golden fried mushrooms" },
                    { name: "Chipotle Chicken Livers", price: "$3.00", desc: "Spicy livers" },
                    { name: "4 Vol-au-vents", price: "$3.00", desc: "Tuna or Chicken filling" },
                    { name: "Focaccia", price: "$3.50", desc: "Plain, Garlic, or Cheese" },
                    { name: "Petiscos Trinchado", price: "$4.00", desc: "Portuguese savory dish" }
                ]
            },
            {
                category: "Bulawayo Chicken",
                items: [
                    { name: "Full Chicken", price: "$18.00", desc: "The whole bird, grilled to perfection" },
                    { name: "Half Chicken", price: "$14.00", desc: "Half bird portion" },
                    { name: "Quarter Chicken", price: "$7.00", desc: "Leg or breast piece" },
                    { name: "Chicken Schnitzel Medallion", price: "$12.00", desc: "With choice of cheesy, mushroom, or pepper sauce", image: "images/menu/Chicken Schnitzel $12.jpeg" },
                    { name: "Grilled Chicken Breasts", price: "$6.00", desc: "Succulent seasoned breasts" },
                    { name: "Spinach Stuffed Breasts", price: "$12.00", desc: "Stuffed with creamy spinach" },
                    { name: "Flying Hog", price: "$15.00", desc: "Wings and ribs", image: "images/menu/Flying Hog (Wings and ribs) $15.jpeg" },
                    { name: "Chicken Mexican Wrap", price: "$3.50", desc: "Spicy chicken wrap", image: "images/menu/ChickenMexican Wrap $3,50.jpeg" }
                ]
            },
            {
                category: "Bulawayo Hearty Meals",
                items: [
                    { name: "Oxtail", price: "$12.00", desc: "Slow cooked stew" },
                    { name: "Chicken Makhaya", price: "$8.00", desc: "Traditional home style chicken" },
                    { name: "Lamb Curry", price: "$8.00", desc: "Aromatic lamb curry" },
                    { name: "Brisket", price: "$8.00", desc: "Tender slow cooked beef" },
                    { name: "Garlic Beef/Chicken/Pork Rice", price: "$5.00", desc: "Savory rice dish", image: "images/menu/Garlic Beef Chicken Pork Rice $5.jpeg" }
                ]
            },
            {
                category: "Bulawayo Steaks",
                items: [
                    { name: "Beef/Pork Frites", price: "$8.00", desc: "200g gammon or sirloin, fried egg, chips, house bbq mayo" },
                    { name: "Grilled Beef Fillet", price: "$10.00", desc: "Spicy flavourful grilled fillet topped with chimichuri sauce" },
                    { name: "Honey Garlic Pork Chop", price: "$12.00", desc: "Juicy tender chops in honey garlic sauce", image: "images/menu/Honey Garlic Pork Chop $12 (Juicy tender pork chop cooked in a flavorful honey garlic sauce).jpeg" },
                    { name: "Ribs and Wings Combo", price: "$15.00", desc: "Best of both worlds" },
                    { name: "Rump Steak 200g", price: "$10.00", desc: "Juicy rump cooked to your liking", image: "images/menu/Rump Steak 200g or 300g $10 or $13 respectively.jpeg" },
                    { name: "Rump Steak 300g", price: "$13.00", desc: "Large rump cooked to your liking" },
                    { name: "Salisbury Steak", price: "$10.00", desc: "200g sirloin topped with brown gravy" },
                    { name: "Sticky Honey Garlic Ribs", price: "$12.00", desc: "Slow cooked pork ribs in signature sauce" },
                    { name: "Surf & Turf (Calamari)", price: "$16.00", desc: "Rump & Calamari" },
                    { name: "Surf & Turf (Prawns)", price: "$18.00", desc: "Rump & 4 Prawns" },
                    { name: "T-Bone 300g", price: "$12.00", desc: "Flame grilled, tender & flavourful" },
                    { name: "Pork Chop", price: "$12.00", desc: "Grilled pork chop", image: "images/menu/Pork Chop $12.jpeg" },
                    { name: "Sizzling Beef/Chicken", price: "$13.00", desc: "With rice", image: "images/menu/Sizzling Beef Chicken with rice $13.jpeg" }
                ]
            },
            {
                category: "Kiddies Menu",
                items: [
                    { name: "Chicken Strips with Chips", price: "$6.00", desc: "Crispy strips", image: "images/menu/Chicken Strips $6.jpeg" },
                    { name: "Chicken or Beef Burger", price: "$5.00", desc: "Kid sized burger" },
                    { name: "Baked Pasta", price: "$5.00", desc: "Cheesy pasta bake" },
                    { name: "Hawaiian/Margherita Pizza", price: "$5.00", desc: "Small pizza" },
                    { name: "Chicken/Fish Nuggets", price: "$5.00", desc: "Bite sized snacks" },
                    { name: "1/4 Chicken and Chips", price: "$7.00", desc: "Quarter chicken with chips", image: "images/menu/14 Chicken and chips $7.jpeg" }
                ]
            },
            {
                category: "Bulawayo Pastas",
                items: [
                    { name: "Beef Napolitana", price: "$8.00", desc: "Beef strips, garlic, mixed peppers, napolitana sauce" },
                    { name: "Bolognaise", price: "$9.00", desc: "Spaghetti, mince, napolitana sauce" },
                    { name: "Chicken Alfredo", price: "$12.00", desc: "Linguine, mushrooms, bacon, chicken strips & creamy sauce" },
                    { name: "Chicken Fettuccine", price: "$10.00", desc: "Chicken strips, mushrooms, garlic, onion, creamy sauce" },
                    { name: "Creamy Pasta", price: "$8.00", desc: "Penne, peppers, chicken strips & creamy pasta" },
                    { name: "Lasagna", price: "$12.00", desc: "Beef, Chicken, or Veg options" },
                    { name: "Shrimp & Salmon Fettuccine", price: "$15.00", desc: "Shrimps, salmon, garlic onion, fresh cream & parsley", image: "images/menu/Shrimp & Salmon Fettucine $15,00 (shrimp, salmon, fettucine, pasta, garlic, onion, fresh cream& parsley), Beef Napolitano $8,00 (Beef strips, Garlic, mixed peppers, napolitana sauce), Creamy Chicken Pasta.jpeg" },
                    { name: "Spaghetti e Polpette", price: "$10.00", desc: "6 meatballs in tomato sauce" },
                    { name: "Veg Pasta (V)", price: "$8.00", desc: "Macaroni, mixed vegs & creamy sauce" }
                ]
            },
            {
                category: "Bulawayo Pizza's",
                items: [
                    { name: "The Fairy Pizza", price: "$14.00", desc: "Signature pizza" },
                    { name: "Midlands Dargle Chicken", price: "$10.00", desc: "Specialty chicken pizza" },
                    { name: "Margherita / Hawaiian", price: "$8.00", desc: "Classic favorites" },
                    { name: "Three Cheeses", price: "$10.00", desc: "Cheese lover's delight", image: "images/menu/3 Cheeses Pizza $10.jpeg" },
                    { name: "Bacon Avo & Feta", price: "$9.00", desc: "Rich and creamy" },
                    { name: "Chicken Mushroom", price: "$11.00", desc: "Savory combo" },
                    { name: "BBQ Steak", price: "$10.00", desc: "Meaty feast" },
                    { name: "Regina", price: "$9.00", desc: "Ham and mushroom", image: "images/menu/Regina Pizza $9.jpeg" }
                ]
            },
            {
                category: "Bulawayo Platters",
                items: [
                    { name: "All Day Platter", price: "$30.00", desc: "2 sliders, wrap, wings/drums, samoosas, sausages, pork chop, chips, salad", image: "images/menu/All Day Platter $30.jpeg" },
                    { name: "Family Platter", price: "$40.00", desc: "Samoosas, spring rolls, salad, 1/2 chicken, rump, sausage, chips, meatballs" },
                    { name: "Platter for 2", price: "$25.00", desc: "Wings/drums, pork chop, sausage, rump steak, chips", image: "images/menu/Platter for 2 $25.jpeg" },
                    { name: "Platter for 3", price: "$35.00", desc: "6 wings/drums, 2 pork chops, 2 sausages, 2 rump steaks, chips, salads" }
                ]
            },
            {
                category: "Stir Fry",
                items: [
                    { name: "Sea Food Stir Fry", price: "$10.00", desc: "Asian style seafood mix" },
                    { name: "Beef Stir Fry", price: "$8.00", desc: "Tender beef strips" },
                    { name: "Chicken Stir Fry", price: "$7.00", desc: "Chicken strips and veg", image: "images/menu/Chicken Stir Fry $7.jpeg" },
                    { name: "Veg Stir Fry", price: "$6.00", desc: "Mixed fresh vegetables" },
                    { name: "Singapore Noodles", price: "$7.00", desc: "Spicy noodles", image: "images/menu/Singapore noodles $7.jpeg" },
                    { name: "Perthai Noodles", price: "$7.00", desc: "Thai style noodles", image: "images/menu/Perthai Noodles $7.jpeg" }
                ]
            },
            {
                category: "Bulawayo Sea Foods",
                items: [
                    { name: "Grilled Tilapia", price: "$10.00", desc: "Healthy and delicious treat" },
                    { name: "Hake", price: "$10.00", desc: "Golden & crispy fillets with tartar sauce" },
                    { name: "6 Queen Prawns", price: "$16.00", desc: "Succulent prawns", image: "images/menu/6 Queen Prawns $16.jpeg" },
                    { name: "8 Queen Prawns", price: "$20.00", desc: "Larger portion succulent prawns" },
                    { name: "Hake & Calamari Combo", price: "$15.00", desc: "Fish and rings combo" },
                    { name: "Sea Food Boil", price: "$30.00", desc: "Feast of the sea", image: "images/menu/Sea food boil $30.jpeg" },
                    { name: "Sea Food Platter", price: "$35.00", desc: "Hake, Calamari, 6 prawns, 6 mussels, rice, ciabatta" },
                    { name: "6 Prawn and Calamari", price: "$18.00", desc: "Combo", image: "images/menu/6 Prawn and Calamari.jpeg" }
                ]
            },
            {
                category: "Bulawayo China",
                items: [
                    { name: "Pork / Chicken", price: "$7.00", desc: "Chinese style" },
                    { name: "Beef in Oyster / Ginger", price: "$8.00", desc: "Classic flavors" },
                    { name: "Garlic Beef Rice", price: "$9.00", desc: "Savory beef rice" },
                    { name: "Beef Mushroom", price: "$9.00", desc: "Beef and mushroom stir" },
                    { name: "Chicken & Cashew Nuts", price: "$9.00", desc: "Crunchy nut combo" },
                    { name: "Chowmein (Chicken/Beef)", price: "$7.00", desc: "Fried noodles" },
                    { name: "Egg Fried Rice", price: "$3.00", desc: "Classic side" },
                    { name: "Vegge Noodles", price: "$5.00", desc: "Vegetarian noodle dish" },
                    { name: "Chicken Fried Rice", price: "$7.00", desc: "Rice with chicken bits" },
                    { name: "Sizzling Beef/Chicken", price: "$8.00", desc: "Served hot on iron plate" },
                    { name: "Beef or Prawn Chow Mein", price: "$8.00", desc: "With chicken or pork", image: "images/menu/Beef or Prawn Chow Mein $8 Chicken or Pork.jpeg" }
                ]
            },
            {
                category: "Bulawayo Sushi",
                items: [
                    { name: "Inari Prawn / Salmon (2pc)", price: "$4.00", desc: "Bean curd pockets" },
                    { name: "Prawn / Salmon California (8pc)", price: "$8.00", desc: "Inside out rolls" },
                    { name: "Prawn / Salmon Maki (6pc)", price: "$8.00", desc: "Seaweed rolls" },
                    { name: "Prawn / Salmon Nigiri (2pc)", price: "$6.00", desc: "Fish on rice" },
                    { name: "Prawn / Salmon Fashion Sandwich", price: "$12.00 / $10.00", desc: "Layered sushi sandwich" },
                    { name: "Salmon & Prawn Platter", price: "$10.00", desc: "6 veg maki, 2 cali veg, 2 veg fashion" },
                    { name: "Salmon Platter (7pc)", price: "$5.00", desc: "2 fashion, 2 nigiri, 3 maki" },
                    { name: "Salmon Rainbow Rolls (4pc)", price: "$8.00", desc: "Topped with salmon" },
                    { name: "Salmon Roses (4pc)", price: "$6.00", desc: "Salmon wrapped rice" },
                    { name: "Salmon Sashimi (4pc)", price: "$6.00", desc: "Raw salmon slices" },
                    { name: "Smoked Salmon Creamy Cheese Calc", price: "$10.00", desc: "Rich flavor", image: "images/menu/Smoked Salmon Creamy cheese California 8 pieces. $10 (Sumptuous fusion of bold flavors).jpeg" },
                    { name: "Tempura Prawns / Salmon", price: "$8.00 / $10.00", desc: "Battered and fried" },
                    { name: "Tiger Roll (8pc)", price: "$10.00", desc: "Prawn, salmon, avo mix" },
                    { name: "Veg California (8pc)", price: "$4.00", desc: "Vegetarian rolls" },
                    { name: "Veg Fashion / Maki / Platter", price: "$3.00 / $3.00 / $5.00", desc: "Vegetarian assortment" },
                    { name: "Fairy Sushi Platter", price: "$30.00", desc: "Assorted sushi", image: "images/menu/Fairy Sushi Platter $30.jpeg" },
                    { name: "Rainbow Reloaded", price: "$12.00", desc: "Specialty roll", image: "images/menu/Rainbow Reloaded $12.jpeg" }
                ]
            },
            {
                category: "Bulawayo Salads",
                items: [
                    { name: "Ceasar Salad", price: "$8.00", desc: "Fresh ingredients, ceasar dressing" },
                    { name: "Chicken Cobb Salad", price: "$8.00", desc: "Grilled chicken, bacon, avo, pumpkin seeds" },
                    { name: "Greek Salad (V)", price: "$7.00", desc: "Feta, olives, cucumber" },
                    { name: "Roasted Butternut & Steak", price: "$8.00", desc: "With beef fillet cubes" },
                    { name: "Rockerfort Salad", price: "$8.00", desc: "Blue cheese, olives, mayonnaise" },
                    { name: "Salmon Salad", price: "$15.00", desc: "Fresh salmon, avocado, sunflower seeds" },
                    { name: "Sweet Corn Salad", price: "$8.00", desc: "Grilled corn, almonds, honey mustard" }
                ]
            },
            {
                category: "Bulawayo Drinks",
                items: [
                    { name: "Milkshakes", price: "$2.50 / $4.00", desc: "Reg / Large (Cold and creamy)" },
                    { name: "Smoothies", price: "$3.00 / $4.00", desc: "Reg / Large (Fruit blends)" },
                    { name: "Non Alcoholic / Soft Drinks", price: "$1.00 - $2.00", desc: "Coke, Switch, Liquifruit, Krush, Energade" },
                    { name: "Exotic Drinks", price: "$2.50", desc: "Unique local and imported" },
                    { name: "Slush Puppie", price: "$2.00", desc: "Iced treat" },
                    { name: "Flavored Water", price: "$1.50", desc: "Refreshing" },
                    { name: "Woolies Assorted", price: "$3.00", desc: "Premium juices" },
                    { name: "Strawberry Daiquiri", price: "$5.00", desc: "Cocktail", image: "images/menu/Strawberry Daiquiri $5.jpeg" },
                    { name: "Cosmopolitan", price: "$5.00", desc: "Cocktail", image: "images/menu/Cosmopolitan $5.jpeg" }
                ]
            }
        ];

        function generateLocationMenu(locationName) {
            return baseMenuData.map(cat => ({
                ...cat,
                category: cat.category.replace('Bulawayo', locationName)
            }));
        }

        const menuData = {
            bulawayo: baseMenuData,
            greendale: generateLocationMenu('Greendale'),
            joina_city: generateLocationMenu('Joina City')
        };

        let currentLocation = 'bulawayo';

        const menuSections = document.getElementById('menu-sections');
        const categoryNav = document.getElementById('category-nav');
        const searchInput = document.getElementById('menu-search');

        function switchLocation(loc) {
            currentLocation = loc;

            // Update UI Tabs
            document.querySelectorAll('.branch-tab').forEach(btn => {
                btn.className = "branch-tab px-6 py-2 rounded-full border border-gray-200 bg-white text-text-dark font-medium transition-all hover:border-primary-yellow hover:text-primary-yellow hover:-translate-y-1";
            });
            const activeBtn = document.getElementById(`tab-${loc}`);
            if (activeBtn) {
                activeBtn.className = "branch-tab active px-6 py-2 rounded-full border border-primary-yellow bg-primary-yellow text-white font-bold transition-all hover:shadow-lg hover:-translate-y-1";
            }

            renderMenu(menuData[loc]);
            // Re-run search if there is a query
            if (searchInput.value) {
                searchInput.dispatchEvent(new Event('input'));
            }
        }

        function renderMenu(data) {
            menuSections.innerHTML = '';
            categoryNav.innerHTML = '';

            if (!data || data.length === 0) {
                menuSections.innerHTML = '<p class="text-center text-gray-500">No menu items found.</p>';
                return;
            }

            data.forEach((cat) => {
                const id = cat.category.toLowerCase().replace(/[^a-z0-9]/g, '-');

                // Sidebar Link
                const navLink = document.createElement('a');
                navLink.href = `#${id}`;
                // Smart replace for location prefix
                let cleanName = cat.category;
                ['Bulawayo ', 'Greendale ', 'Joina City '].forEach(prefix => {
                    cleanName = cleanName.replace(prefix, '');
                });

                navLink.innerText = cleanName;
                navLink.className = "text-text-gray hover:text-text-dark hover:pl-2 px-3 transition-all py-1.5 border-l-2 border-transparent hover:border-primary-yellow nav-link-item text-sm";
                navLink.setAttribute('data-target', id);
                categoryNav.appendChild(navLink);

                // Section Container
                const section = document.createElement('section');
                section.id = id;
                section.className = "menu-section mb-12 scroll-mt-28";
                section.innerHTML = `
                    <div class="flex items-center gap-4 mb-8">
                        <h2 class="text-3xl font-bold text-text-dark uppercase tracking-wide">${cat.category}</h2>
                        <div class="h-[2px] flex-grow bg-gray-100/50"></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        ${cat.items.map(item => `
                            <div class="bg-white rounded-[2rem] border border-gray-100 shadow-sm hover:shadow-lg transition-all group menu-item overflow-hidden relative flex flex-col h-full">
                                ${item.image ? `<div class="h-48 w-full overflow-hidden"><img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500"></div>` : ''}
                                <div class="p-6 flex flex-col flex-grow">
                                    <div class="flex justify-between items-start mb-2">
                                        <h4 class="text-lg font-bold group-hover:text-primary-yellow transition-colors leading-tight pr-4">${item.name}</h4>
                                        <span class="text-xl font-bold text-text-dark whitespace-nowrap">${item.price}</span>
                                    </div>
                                    <p class="text-text-gray text-sm leading-relaxed mb-6 flex-grow">${item.desc}</p>
                                    <button 
                                        onclick="addToCart('${item.name}', '${item.price}')"
                                        class="add-item-btn flex items-center justify-center gap-2 w-full py-3 bg-gray-50 text-text-dark rounded-2xl font-bold text-sm hover:bg-primary-yellow hover:text-white transition-all active:scale-95 group-hover:bg-primary-yellow/10"
                                    >
                                        <i data-lucide="plus" class="w-4 h-4"></i>
                                        Add to Cart
                                    </button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                menuSections.appendChild(section);
            });

            lucide.createIcons();

            // GSAP Entrance (Batch for reliability)
            // Use batch to handle multiple items efficiently and reliably
            ScrollTrigger.batch(".menu-item", {
                onEnter: batch => gsap.to(batch, {
                    autoAlpha: 1,
                    y: 0,
                    stagger: 0.05,
                    overwrite: true,
                    duration: 0.5,
                    ease: "power2.out"
                }),
                onEnterBack: batch => gsap.to(batch, {
                    autoAlpha: 1,
                    y: 0,
                    overwrite: true,
                    duration: 0.1
                }),
                // Ensure initial state is set right before animation starts to avoid "hidden forever" bugs
                onRefresh: batch => gsap.set(batch, { y: 20 }),
                start: "top 95%",
                once: true
            });

            // Force initial state safely
            gsap.set(".menu-item", { autoAlpha: 0, y: 20 });
        }

        // Initialize
        renderMenu(menuData.bulawayo);

        // Active Link Highlighting
        window.addEventListener('scroll', () => {
            let current = '';
            document.querySelectorAll('.menu-section').forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 150) {
                    current = section.getAttribute('id');
                }
            });

            document.querySelectorAll('.nav-link-item').forEach(link => {
                link.classList.remove('nav-link-active');
                if (link.getAttribute('data-target') === current) {
                    link.classList.add('nav-link-active');
                }
            });
        });

        // Search Filter
        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const filteredData = menuData[currentLocation].map(cat => ({
                ...cat,
                items: cat.items.filter(item =>
                    item.name.toLowerCase().includes(query) ||
                    item.desc.toLowerCase().includes(query) ||
                    cat.category.toLowerCase().includes(query)
                )
            })).filter(cat => cat.items.length > 0);

            renderMenu(filteredData);
            ScrollTrigger.refresh();
        });

        // Cart Functionality
        let cart = JSON.parse(localStorage.getItem('fairyCart')) || [];

        const cartDrawer = document.getElementById('cart-drawer');
        const openCartBtn = document.getElementById('open-cart');
        const closeCartBtn = document.getElementById('close-cart');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartCount = document.getElementById('cart-count');
        const cartSubtotal = document.getElementById('cart-subtotal');
        const checkoutBtn = document.getElementById('checkout-btn');

        function toggleCart(open) {
            if (open) {
                cartDrawer.classList.remove('invisible');
                gsap.to(cartDrawer, { opacity: 1, duration: 0.3 });
                gsap.to(cartDrawer.querySelector('div'), { x: 0, duration: 0.4, ease: "power3.out" });
                renderCart();
            } else {
                gsap.to(cartDrawer.querySelector('div'), { x: '100%', duration: 0.3, ease: "power3.in" });
                gsap.to(cartDrawer, {
                    opacity: 0, duration: 0.3, onComplete: () => {
                        cartDrawer.classList.add('invisible');
                    }
                });
            }
        }

        openCartBtn.addEventListener('click', () => toggleCart(true));
        closeCartBtn.addEventListener('click', () => toggleCart(false));
        cartDrawer.addEventListener('click', (e) => {
            if (e.target === cartDrawer) toggleCart(false);
        });

        window.addToCart = function (name, price) {
            const existingItem = cart.find(item => item.name === name);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ name, price, quantity: 1 });
            }
            saveCart();
            updateCartCount();

            // Subtle feedback
            const btn = event.currentTarget;
            btn.innerHTML = '<i data-lucide="check" class="w-4 h-4"></i> Added!';
            btn.classList.add('bg-primary-yellow', 'text-white');
            lucide.createIcons();
            setTimeout(() => {
                btn.innerHTML = '<i data-lucide="plus" class="w-4 h-4"></i> Add to Cart';
                btn.classList.remove('bg-primary-yellow', 'text-white');
                lucide.createIcons();
            }, 1000);
        };

        function removeFromCart(index) {
            cart.splice(index, 1);
            saveCart();
            renderCart();
            updateCartCount();
        }

        function updateQuantity(index, delta) {
            cart[index].quantity += delta;
            if (cart[index].quantity <= 0) {
                cart.splice(index, 1);
            }
            saveCart();
            renderCart();
            updateCartCount();
        }

        function saveCart() {
            localStorage.setItem('fairyCart', JSON.stringify(cart));
        }



        function updateCartCount() {
            const total = cart.reduce((acc, item) => acc + item.quantity, 0);
            if (cartCount) cartCount.innerText = total;

            // Update Mobile Cart Count too
            const mobileCount = document.getElementById('mobile-cart-count');
            if (mobileCount) mobileCount.innerText = total;

            if (total === 0) {
                if (checkoutBtn) checkoutBtn.classList.add('opacity-50', 'pointer-events-none');
            } else {
                if (checkoutBtn) checkoutBtn.classList.remove('opacity-50', 'pointer-events-none');
            }
        }

        function renderCart() {
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="text-center py-20 opacity-40">
                        <i data-lucide="shopping-cart" class="w-16 h-16 mx-auto mb-4"></i>
                        <p class="italic">Your cart is empty</p>
                    </div>
                `;
                cartSubtotal.innerText = '$0.00';
                lucide.createIcons();
                return;
            }

            let subtotal = 0;
            cartItemsContainer.innerHTML = cart.map((item, index) => {
                const singlePrice = parseFloat(item.price.replace('$', '').split(' / ')[0]); // Handle range like $2.50 / $3.00
                const itemTotal = singlePrice * item.quantity;
                subtotal += itemTotal;

                return `
                    <div class="flex justify-between items-center gap-4 bg-gray-50 p-5 rounded-[1.5rem] border border-gray-100">
                        <div class="flex-grow">
                            <h4 class="font-bold text-sm mb-1">${item.name}</h4>
                            <span class="text-primary-yellow font-bold">${item.price}</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="flex items-center gap-2 bg-white rounded-full border border-gray-100 p-1">
                                <button onclick="updateQuantity(${index}, -1)" class="w-6 h-6 flex items-center justify-center hover:bg-gray-100 rounded-full transition-all">-</button>
                                <span class="text-xs font-bold w-4 text-center">${item.quantity}</span>
                                <button onclick="updateQuantity(${index}, 1)" class="w-6 h-6 flex items-center justify-center hover:bg-gray-100 rounded-full transition-all">+</button>
                            </div>
                            <button onclick="removeFromCart(${index})" class="text-red-400 hover:text-red-600 p-1">
                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            cartSubtotal.innerText = `$${subtotal.toFixed(2)}`;
            lucide.createIcons();
        }

        // Initialize view
        updateCartCount();

        // Check for openCart query param
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('openCart') === 'true') {
            setTimeout(() => toggleCart(true), 500);
        }

        // Mobile Menu Logic (Ported from index.html)
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const closeSidebarBtn = document.getElementById('close-sidebar');
        const mobileSidebar = document.getElementById('mobile-sidebar');
        const mobileCartLink = document.getElementById('mobile-cart-link');

        function toggleMobileSidebar(show) {
            if (show) {
                mobileSidebar.classList.remove('invisible');
                mobileSidebar.classList.remove('opacity-0');
                if (mobileSidebar.querySelector('div')) {
                    // Mobile sidebar inner logic
                    mobileSidebar.querySelector('div').classList.remove('translate-x-full');
                }
            } else {
                if (mobileSidebar.querySelector('div')) {
                    mobileSidebar.querySelector('div').classList.add('translate-x-full');
                }
                setTimeout(() => {
                    mobileSidebar.classList.add('opacity-0');
                    mobileSidebar.classList.add('invisible');
                }, 300);
            }
        }

        if (mobileMenuBtn) mobileMenuBtn.addEventListener('click', () => toggleMobileSidebar(true));
        if (closeSidebarBtn) closeSidebarBtn.addEventListener('click', () => toggleMobileSidebar(false));
        if (mobileSidebar) {
            mobileSidebar.addEventListener('click', (e) => {
                if (e.target === mobileSidebar) toggleMobileSidebar(false);
            });
        }

        // Mobile Cart Link Trigger
        if (mobileCartLink) {
            mobileCartLink.addEventListener('click', (e) => {
                e.preventDefault();
                toggleMobileSidebar(false);
                setTimeout(() => toggleCart(true), 300);
            });
        }

        // Smooth Nav
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const href = this.getAttribute('href');
                if (href === "#") return;

                e.preventDefault();
                const target = document.querySelector(href);
                if (target) {
                    window.scrollTo({
                        top: target.offsetTop - 100,
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>

</html>