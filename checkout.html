<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Fairy Cafe Bulawayo</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-yellow': '#1d691b',
                        'text-dark': '#2B2B2B',
                        'text-gray': '#7c7c7c',
                        'bg-light': '#F2F2F2',
                        'bg-dark': '#111',
                    },
                    fontFamily: {
                        'poppins': ['Poppins', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .option-card.active {
            border-color: #1d691b;
            background-color: rgba(29, 105, 27, 0.05);
        }
    </style>
</head>

<body class="bg-bg-light min-h-screen text-text-dark">

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 w-full z-50 flex justify-between items-center px-6 py-2 md:px-16 box-border">
        <!-- Logo -->
        <a href="index.html" class="flex items-center md:ml-8">
            <img src="logo.png" alt="Fairy Cafe Logo"
                class="h-44 w-auto object-contain drop-shadow-md hover:scale-105 transition-transform duration-300">
        </a>

        <!-- Center Nav -->
        <div class="hidden md:flex items-center gap-10">
            <i data-lucide="search" class="w-4 h-4 cursor-pointer hover:text-primary-yellow transition-colors"></i>
            <ul class="flex gap-8 list-none">
                <li><a href="index.html#features-section"
                        class="text-text-gray text-sm font-medium hover:text-text-dark transition-colors">Why
                        Fairy Cafe?</a></li>
                <li><a href="index.html#about-section"
                        class="text-text-dark text-sm font-medium relative transition-colors">
                        About
                        <span
                            class="absolute -top-1 -left-2.5 w-1.5 h-1.5 bg-text-dark rounded-full rotate-45 transform"></span>
                    </a></li>
                <li class="relative group">
                    <a href="menu.html"
                        class="text-text-gray text-sm font-medium hover:text-text-dark transition-colors flex items-center gap-1">
                        Menu
                        <i data-lucide="chevron-down"
                            class="w-3.5 h-3.5 transition-transform group-hover:rotate-180"></i>
                    </a>
                    <!-- Dropdown Menu -->
                    <div
                        class="absolute top-full left-1/2 -translate-x-1/2 pt-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
                        <div class="bg-white rounded-2xl shadow-2xl p-4 border border-gray-50 min-w-[180px]">
                            <ul class="space-y-2">
                                <li><a href="menu.html?cat=breakfast"
                                        class="text-text-gray text-xs hover:text-primary-yellow flex items-center gap-2 transition-colors py-1"><i
                                            data-lucide="coffee" class="w-3 h-3"></i> Breakfast</a></li>
                                <li><a href="menu.html?cat=burgers"
                                        class="text-text-gray text-xs hover:text-primary-yellow flex items-center gap-2 transition-colors py-1"><i
                                            data-lucide="beef" class="w-3 h-3"></i> Burgers</a></li>
                                <li><a href="menu.html?cat=pizzas"
                                        class="text-text-gray text-xs hover:text-primary-yellow flex items-center gap-2 transition-colors py-1"><i
                                            data-lucide="pizza" class="w-3 h-3"></i> Pizzas</a></li>
                                <li><a href="menu.html?cat=sushi"
                                        class="text-text-gray text-xs hover:text-primary-yellow flex items-center gap-2 transition-colors py-1"><i
                                            data-lucide="fish" class="w-3 h-3"></i> Sushi</a></li>
                            </ul>
                        </div>
                    </div>
                </li>
            </ul>
        </div>

        <!-- Mobile Menu Toggle -->
        <div class="md:hidden flex items-center gap-4">
            <button id="mobile-menu-btn" class="p-2 text-text-dark hover:text-primary-yellow transition-colors">
                <i data-lucide="menu" class="w-8 h-8"></i>
            </button>
        </div>

        <!-- Auth Buttons (Desktop) -->
        <div class="hidden md:flex items-center gap-6">
            <button
                class="px-6 py-2.5 rounded-full text-sm font-medium border border-text-dark bg-white text-text-dark hover:bg-bg-light transition-all">Sign
                In</button>
            <button
                class="px-6 py-2.5 rounded-full text-sm font-medium bg-primary-yellow text-white shadow-[0_5px_15px_rgba(29,105,27,0.4)] hover:-translate-y-0.5 hover:shadow-[0_8px_18px_rgba(29,105,27,0.6)] transition-all">Login</button>
            <button id="open-cart"
                class="relative p-2 bg-primary-yellow/10 rounded-full hover:bg-primary-yellow/20 transition-all">
                <i data-lucide="shopping-cart" class="w-5 h-5 text-primary-yellow"></i>
                <span id="cart-count"
                    class="absolute -top-1 -right-1 bg-primary-yellow text-white text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center border-2 border-white">0</span>
            </button>
        </div>
    </nav>

    <!-- Mobile Sidebar -->
    <div id="mobile-sidebar"
        class="fixed inset-0 bg-black/60 backdrop-blur-md z-[100] transition-opacity duration-300 opacity-0 invisible">
        <div
            class="absolute right-0 top-0 h-full w-[300px] bg-white p-10 flex flex-col transform translate-x-full transition-transform duration-300 ease-in-out shadow-2xl">
            <button id="close-sidebar" class="self-end p-2 text-text-gray hover:text-text-dark mb-10">
                <i data-lucide="x" class="w-8 h-8"></i>
            </button>

            <ul class="flex flex-col gap-6 mb-12">
                <li><a href="index.html#features-section"
                        class="text-xl font-bold text-text-dark border-b border-gray-100 pb-2 block">Why Fairy
                        Cafe?</a></li>
                <li><a href="index.html#about-section"
                        class="text-xl font-bold text-text-dark border-b border-gray-100 pb-2 block">About</a></li>
                <li><a href="menu.html"
                        class="text-xl font-bold text-text-dark border-b border-gray-100 pb-2 block">Full Menu</a></li>
                <li><a href="#" id="mobile-cart-link"
                        class="text-xl font-bold text-text-dark border-b border-gray-100 pb-2 flex justify-between items-center">
                        My Cart
                        <span id="mobile-cart-count"
                            class="bg-primary-yellow text-white text-xs px-3 py-1 rounded-full">0</span>
                    </a></li>
            </ul>

            <div class="mt-auto flex flex-col gap-4">
                <button
                    class="w-full py-4 rounded-full font-bold border-2 border-text-dark text-text-dark hover:bg-bg-light transition-all">Sign
                    In</button>
                <button
                    class="w-full py-4 rounded-full font-bold bg-primary-yellow text-white shadow-lg hover:bg-text-dark transition-all">Login</button>
            </div>
        </div>
    </div>

    <main class="py-12 px-6 md:px-16 max-w-[1200px] mx-auto">
        <h1 class="text-4xl font-bold mb-10">Complete Your Order</h1>

        <div class="grid grid-cols-1 lg:grid-cols-[1fr_400px] gap-12">

            <!-- Checkout Form -->
            <div class="space-y-8">

                <!-- Order Type Section -->
                <section class="bg-white p-8 rounded-[2.5rem] shadow-sm border border-gray-50">
                    <h3 class="text-xl font-bold mb-6 flex items-center gap-3">
                        <i data-lucide="shopping-bag" class="text-primary-yellow"></i>
                        Order Method
                    </h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div id="type-delivery"
                            class="option-card active p-6 rounded-2xl border-2 border-gray-100 cursor-pointer hover:border-primary-yellow/30 transition-all text-center">
                            <i data-lucide="truck" class="w-8 h-8 mx-auto mb-3 text-primary-yellow"></i>
                            <span class="font-bold block">Delivery</span>
                            <span class="text-xs text-text-gray">To your doorstep</span>
                        </div>
                        <div id="type-pickup"
                            class="option-card p-6 rounded-2xl border-2 border-gray-100 cursor-pointer hover:border-primary-yellow/30 transition-all text-center">
                            <i data-lucide="package" class="w-8 h-8 mx-auto mb-3 text-text-gray"></i>
                            <span class="font-bold block">Store Pickup</span>
                            <span class="text-xs text-text-gray">Collect at 168 Mugabe Way</span>
                        </div>
                    </div>
                </section>

                <!-- Personal Info Section -->
                <section class="bg-white p-8 rounded-[2.5rem] shadow-sm border border-gray-50">
                    <h3 class="text-xl font-bold mb-6 flex items-center gap-3">
                        <i data-lucide="user" class="text-primary-yellow"></i>
                        Details
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-xs font-bold text-text-gray uppercase tracking-wider mb-2">Full
                                Name</label>
                            <input type="text" placeholder="John Doe"
                                class="w-full px-5 py-3 rounded-xl border border-gray-100 outline-none focus:border-primary-yellow bg-gray-50/30">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-text-gray uppercase tracking-wider mb-2">Phone
                                Number</label>
                            <input type="tel" placeholder="+263 ..."
                                class="w-full px-5 py-3 rounded-xl border border-gray-100 outline-none focus:border-primary-yellow bg-gray-50/30">
                        </div>
                        <div class="md:col-span-2" id="delivery-address-container">
                            <label class="block text-xs font-bold text-text-gray uppercase tracking-wider mb-2">Delivery
                                Address</label>
                            <textarea placeholder="Your address in Bulawayo..." rows="3"
                                class="w-full px-5 py-3 rounded-xl border border-gray-100 outline-none focus:border-primary-yellow bg-gray-50/30"></textarea>
                        </div>
                    </div>
                </section>

                <!-- Payment Section (Static for MVP) -->
                <section class="bg-white p-8 rounded-[2.5rem] shadow-sm border border-gray-50">
                    <h3 class="text-xl font-bold mb-6 flex items-center gap-3">
                        <i data-lucide="credit-card" class="text-primary-yellow"></i>
                        Payment Method
                    </h3>
                    <div
                        class="p-6 rounded-2xl border-2 border-primary-yellow bg-primary-yellow/5 flex items-center gap-4">
                        <i data-lucide="banknote" class="w-6 h-6 text-primary-yellow"></i>
                        <div>
                            <span class="font-bold block">Cash on Delivery / Pickup</span>
                            <span class="text-xs text-text-gray">Pay when you receive your meal</span>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Order Summary -->
            <aside>
                <div class="sticky top-24 bg-white p-8 rounded-[2.5rem] shadow-xl border border-gray-100">
                    <h3 class="text-xl font-bold mb-6 pb-4 border-b border-gray-100">Order Summary</h3>

                    <div id="checkout-items" class="space-y-4 mb-8 max-h-[400px] overflow-y-auto pr-2">
                        <!-- Items injected via JS -->
                    </div>

                    <div class="space-y-3 pt-6 border-t border-gray-100">
                        <div class="flex justify-between text-text-gray">
                            <span>Subtotal</span>
                            <span id="subtotal">$0.00</span>
                        </div>
                        <div class="flex justify-between text-text-gray" id="delivery-fee-row">
                            <span>Delivery Fee</span>
                            <span id="delivery-fee">$2.00</span>
                        </div>
                        <div class="flex justify-between text-xl font-bold text-text-dark pt-3">
                            <span>Total</span>
                            <span id="final-total">$0.00</span>
                        </div>
                    </div>

                    <button id="place-order-btn"
                        class="w-full mt-10 py-5 bg-primary-yellow text-white rounded-full font-bold text-lg hover:bg-text-dark transition-all transform hover:-translate-y-1 shadow-2xl active:scale-95">
                        Place Order
                    </button>
                    <p class="text-center text-xs text-text-gray mt-4">Estimated time: 25-40 mins</p>
                </div>
            </aside>
        </div>
    </main>

    <!-- Success Modal -->
    <div id="success-modal"
        class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[200] flex items-center justify-center opacity-0 invisible transition-all duration-500">
        <div
            class="bg-white p-12 rounded-[3rem] max-w-md w-full text-center transform scale-90 transition-all duration-500">
            <div
                class="w-24 h-24 bg-primary-yellow/10 rounded-full flex items-center justify-center mx-auto mb-8 text-primary-yellow">
                <i data-lucide="check-circle-2" class="w-12 h-12"></i>
            </div>
            <h2 class="text-3xl font-bold mb-4">Order Placed!</h2>
            <p class="text-text-gray mb-10 leading-relaxed">Your magic meal is being prepared. We'll contact you shortly
                at the provided number.</p>
            <a href="index.html"
                class="block w-full py-4 bg-text-dark text-white rounded-full font-bold hover:bg-primary-yellow transition-colors">
                Back to Home
            </a>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // LocalStorage Cart Handling
        let cart = JSON.parse(localStorage.getItem('fairyCart')) || [];

        function updateSummary() {
            const container = document.getElementById('checkout-items');
            container.innerHTML = '';

            let subtotalVal = 0;

            if (cart.length === 0) {
                container.innerHTML = '<p class="text-center text-text-gray py-8 italic">Your cart is empty</p>';
                document.getElementById('place-order-btn').disabled = true;
                document.getElementById('place-order-btn').classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                cart.forEach((item, index) => {
                    const priceNum = parseFloat(item.price.replace('$', ''));
                    subtotalVal += priceNum * item.quantity;

                    container.innerHTML += `
                        <div class="flex justify-between items-center gap-4">
                            <div class="flex-grow">
                                <h4 class="font-bold text-sm">${item.name}</h4>
                                <span class="text-xs text-text-gray">${item.quantity} x ${item.price}</span>
                            </div>
                            <span class="font-bold">$${(priceNum * item.quantity).toFixed(2)}</span>
                        </div>
                    `;
                });
            }

            const deliveryFee = document.getElementById('type-delivery').classList.contains('active') ? 2.00 : 0.00;

            document.getElementById('subtotal').innerText = `$${subtotalVal.toFixed(2)}`;
            document.getElementById('delivery-fee').innerText = `$${deliveryFee.toFixed(2)}`;
            document.getElementById('final-total').innerText = `$${(subtotalVal + deliveryFee).toFixed(2)}`;

            if (deliveryFee === 0) {
                document.getElementById('delivery-fee-row').classList.add('opacity-40');
            } else {
                document.getElementById('delivery-fee-row').classList.remove('opacity-40');
            }
        }

        // Toggle Logic
        const delBtn = document.getElementById('type-delivery');
        const pickBtn = document.getElementById('type-pickup');
        const addressContainer = document.getElementById('delivery-address-container');

        delBtn.addEventListener('click', () => {
            delBtn.classList.add('active');
            pickBtn.classList.remove('active');
            delBtn.querySelector('i').classList.replace('text-text-gray', 'text-primary-yellow');
            pickBtn.querySelector('i').classList.replace('text-primary-yellow', 'text-text-gray');
            addressContainer.style.display = 'block';
            updateSummary();
        });

        pickBtn.addEventListener('click', () => {
            pickBtn.classList.add('active');
            delBtn.classList.remove('active');
            pickBtn.querySelector('i').classList.replace('text-text-gray', 'text-primary-yellow');
            delBtn.querySelector('i').classList.replace('text-primary-yellow', 'text-text-gray');
            addressContainer.style.display = 'none';
            updateSummary();
        });

        // Place Order
        document.getElementById('place-order-btn').addEventListener('click', () => {
            const modal = document.getElementById('success-modal');
            const inner = modal.querySelector('div');

            modal.classList.remove('invisible');
            gsap.to(modal, { opacity: 1, duration: 0.5 });
            gsap.to(inner, { scale: 1, duration: 0.5, ease: "back.out(1.7)" });

            localStorage.removeItem('fairyCart');
        });

        updateSummary();

        // Mobile Menu Logic
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const closeSidebarBtn = document.getElementById('close-sidebar');
        const mobileSidebar = document.getElementById('mobile-sidebar');

        function toggleMobileSidebar(show) {
            if (show) {
                mobileSidebar.classList.remove('invisible');
                mobileSidebar.classList.remove('opacity-0');
                if (mobileSidebar.querySelector('div')) {
                    mobileSidebar.querySelector('div').classList.remove('translate-x-full');
                }
            } else {
                if (mobileSidebar.querySelector('div')) {
                    mobileSidebar.querySelector('div').classList.add('translate-x-full');
                }
                setTimeout(() => {
                    mobileSidebar.classList.add('opacity-0');
                    mobileSidebar.classList.add('invisible');
                }, 300);
            }
        }

        if (mobileMenuBtn) mobileMenuBtn.addEventListener('click', () => toggleMobileSidebar(true));
        if (closeSidebarBtn) closeSidebarBtn.addEventListener('click', () => toggleMobileSidebar(false));
        if (mobileSidebar) {
            mobileSidebar.addEventListener('click', (e) => {
                if (e.target === mobileSidebar) toggleMobileSidebar(false);
            });
        }

        // Sync Cart Count
        const cartCount = document.getElementById('cart-count');
        const mobileCount = document.getElementById('mobile-cart-count');
        if (cartCount) cartCount.innerText = cart.reduce((acc, item) => acc + item.quantity, 0);
        if (mobileCount) mobileCount.innerText = cart.reduce((acc, item) => acc + item.quantity, 0);

    </script>
</body>

</html>